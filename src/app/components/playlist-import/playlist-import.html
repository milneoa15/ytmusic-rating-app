<div class="import-container">
  <div class="header">
    <h2>Import Playlists</h2>
    <button class="back-btn" (click)="backToDashboard()">‚Üê Back to Dashboard</button>
  </div>

  <div class="content">
    <div *ngIf="!isImporting" class="playlists-section">
      <div class="section-header">
        <h3>Select Playlists to Import</h3>
        <div class="selection-controls">
          <button class="select-btn" (click)="selectAllPlaylists()">Select All</button>
          <button class="select-btn" (click)="deselectAllPlaylists()">Deselect All</button>
          <span class="selected-count">{{ selectedPlaylistIds.size }} selected</span>
        </div>
      </div>
      
      <div *ngIf="isLoading && playlists.length === 0" class="loading">
        Loading playlists...
      </div>

      <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

      <div class="playlist-grid">
        <div 
          *ngFor="let playlist of playlists" 
          class="playlist-card"
          [class.selected]="isPlaylistSelected(playlist.id)"
          (click)="togglePlaylistSelection(playlist.id)">
          <div class="checkbox-overlay">
            <input 
              type="checkbox" 
              [checked]="isPlaylistSelected(playlist.id)"
              (click)="$event.stopPropagation()"
              (change)="togglePlaylistSelection(playlist.id)">
          </div>
          <div class="playlist-thumbnail">
            <img [src]="playlist.thumbnailUrl" [alt]="playlist.title">
          </div>
          <div class="playlist-info">
            <h4>{{ playlist.title }}</h4>
            <p>{{ playlist.songCount }} songs</p>
          </div>
        </div>
      </div>

      <div class="import-actions" *ngIf="playlists.length > 0">
        <button 
          class="import-btn" 
          (click)="importSelectedPlaylists()"
          [disabled]="selectedPlaylistIds.size === 0">
          Import {{ selectedPlaylistIds.size }} Playlist{{ selectedPlaylistIds.size !== 1 ? 's' : '' }}
        </button>
      </div>
    </div>

    <div *ngIf="isImporting" class="importing-section">
      <h3>Importing Playlists...</h3>
      <div class="progress-container">
        <div class="progress-bar" [style.width.%]="importProgress"></div>
      </div>
      <p class="progress-text">{{ importProgress }}% complete</p>
      <p class="current-playlist">{{ currentlyImportingPlaylist }}</p>
    </div>
  </div>
</div>
